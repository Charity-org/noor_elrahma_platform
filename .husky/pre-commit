#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Step 1: Running lint-staged (Auto-formatting & Linting staged files)..."
npm run lint:staged || (echo "âŒ Step 1 failed. Please fix the staged issues and try again." && exit 1)

echo "ğŸ›¡ï¸  Step 2: Type-checking (Ensuring codebase is type-safe)..."
npm run type-check || (echo "âŒ Step 2 failed. Type errors found. Please fix them and commit again." && exit 1)

echo "ğŸ“ Step 3: Verifying code format (Prettier check)..."
npm run format:check || (echo "âŒ Step 3 failed. Formatting issues detected. Run 'npm run format' and commit again." && exit 1)

echo "ğŸ” Step 4: Final lint check (ESLint)..."
npm run lint || (echo "âŒ Step 4 failed. Lint errors found. Run 'npx eslint . --fix' and commit again." && exit 1)

echo "âœ… All checks passed! ğŸš€âœ¨ Preparing to commit... ğŸ”"
